# 💎 金融级股票预测系统 - 完整指南

## 🚀 快速开始

### 1. 命令行测试
```bash
cd src-tauri
cargo run --example test_professional_prediction
```

### 2. 界面使用
```
1. 输入股票代码（如：600519.SH）
2. 选择已有模型
3. 点击 "💎 金融级预测" 按钮
4. 查看买卖点分析结果
```

## ✨ 核心功能

### 📍 买卖点识别
- **3种买入模式**：多周期共振 / 突破压力 / 回踩支撑
- **3种卖出模式**：多周期共振 / 破位下跌 / 高位背离
- **完整信息**：价格/止损/止盈/风险收益比/置信度/理由

### 📊 技术分析
- **支撑压力位**：MA均线 + 历史高低点 + 斐波那契回撤
- **多周期共振**：日/周/月三重趋势确认（0-3级）
- **量价背离**：底背离（看涨）/ 顶背离（看跌）
- **风险评级**：低风险✅ / 中等⚠️ / 较高🔶 / 高风险⛔

## 💡 使用建议

### ✅ 最佳买入条件
```
- 信号强度 ≥ 75分
- 置信度 ≥ 75%
- 风险收益比 ≥ 2:1
- 共振级别 ≥ 2
- 风险等级：低/中等
```

### ⛔ 立即卖出条件
```
- 出现"破位卖出点"
- 信号强度 ≥ 80分
- 顶背离预警
- 跌破关键支撑
```

### 🛡️ 止损止盈策略
```
1. 严格止损：按建议止损位（通常3-5%）
2. 分批止盈：
   - 第一目标：减仓50%
   - 第二目标：减仓30%
   - 剩余20%：让利润奔跑
3. 动态调整：盈利后上移止损位
```

## 📊 界面展示说明

### 操作建议卡片
显示综合分析后的交易建议和风险等级

### 🟢 买入点信号（建议买入）
- **建议买入价**：推荐的买入价格
- **止损位**：价格跌至此位置时卖出止损（<买入价，防止损失扩大）
- **止盈位**：价格涨至此位置时卖出获利（>买入价，获利了结）
- **风险收益比**：潜在收益/潜在风险，≥2.0为佳
- **置信度**：信号可靠程度（0-100%）

### 🔴 卖出点信号（建议减仓）
- **建议卖出价**：推荐的卖出价格（建议现在就卖）
- **止损位**：如不卖，价格跌至此位置必须卖（<当前价，防止进一步下跌）
- **止盈位**：如不卖且判断错误，价格涨至此位置卖出（>当前价，反向获利）
- **置信度**：信号可靠程度（0-100%）

**⚠️ 金融术语规范（重要！）**：
- **止损位永远 < 当前价**：价格跌到这里必须卖出止损
- **止盈位永远 > 当前价**：价格涨到这里卖出获利
- 无论买入点还是卖出点，都遵循：**止损位 < 当前价 < 止盈位**

### 支撑压力位分析
- 当前位置描述
- 5个关键支撑位
- 5个关键压力位

### 多周期共振分析
- 日/周/月线趋势
- 共振级别（0-3级）
- 信号质量评分

### 量价背离分析
- 底背离/顶背离检测
- 背离强度量化
- 预警信息

## 🎯 策略说明

### 买入点识别逻辑
1. **多周期共振买入**
   - 条件：共振级别≥2 + 多头排列
   - 风险收益比：≥2:1
   - 适用：趋势明确时

2. **突破买入**
   - 条件：突破压力位 + 放量确认
   - 风险收益比：≥2:1
   - 适用：关键位突破

3. **回踩支撑买入**
   - 条件：支撑位不破 + 缩量
   - 风险收益比：≥1.5:1
   - 适用：趋势中的回调

### 卖出点识别逻辑
1. **多周期共振卖出**
   - 条件：共振级别≥2 + 空头排列
   - 目标：-5% ~ -10%

2. **破位卖出**
   - 条件：跌破支撑 + 放量
   - 风险等级：高

3. **高位卖出**
   - 条件：触及压力 + 顶背离
   - 目标：-5%

## 🔧 技术实现

### 后端API
```rust
// 调用专业预测
let (predictions, analysis) = 
    predict_with_professional_strategy(request).await?;

// 获取买卖点
for buy_point in &analysis.buy_points {
    println!("买入: {:.2}元", buy_point.price_level);
}
```

### 前端调用
```typescript
const result = await invoke<ProfessionalPredictionResponse>(
    'predict_with_professional_strategy', 
    { request }
);
// 显示专业分析结果
```

## 📈 信号质量判断

### 高质量信号 (可操作)
- ✅ 信号强度 > 80分
- ✅ 置信度 > 75%
- ✅ 风险收益比 > 2:1
- ✅ 多因素共振

### 低质量信号 (观望)
- ❌ 信号强度 < 60分
- ❌ 置信度 < 60%
- ❌ 风险收益比 < 1.5:1
- ❌ 信号矛盾

## 🐛 常见问题

**Q: 金融术语的止损位和止盈位怎么理解？**
A: 这是标准的金融术语，必须严格遵守：
   - **止损位**：价格跌到这里时卖出止损（永远 < 当前价）
   - **止盈位**：价格涨到这里时卖出获利（永远 > 当前价）
   - **买入点**：建议买入后，设止损(更低)和止盈(更高)
   - **卖出点**：建议卖出时，如果不卖则设止损(更低)和止盈(更高)作为保护
   - 例如：当前85元，止损82元(跌3%)，止盈90元(涨6%)

**Q: 为什么没有买卖点信号？**
A: 当前震荡期/无明确趋势/风险收益比不足，建议耐心等待。

**Q: 信号有效期多久？**
A: 买入信号1-3个交易日，卖出信号建议立即执行。

**Q: 如何提高成功率？**
A: 选择共振级别≥2、置信度≥75%、风险收益比>2的信号。

**Q: 可以重仓操作吗？**
A: 不建议！单只股票建议<20%总资金，严格控制仓位。

## ⚠️ 重要提示

```
1. 本系统仅供技术分析参考，不构成投资建议
2. 股市有风险，投资需谨慎
3. 严格执行止损，保护本金
4. 合理控制仓位，分散风险
5. 建议结合基本面分析
6. 不要在高风险等级时重仓操作
```

## 📚 进阶技巧

1. **信号交叉验证**：同时使用快速预测和金融级预测
2. **关注共振级别**：3级>2级>1级>0级
3. **支撑压力操作**：支撑附近买入，压力附近减仓
4. **背离信号应用**：底背离+买入信号=强烈买入

## 🎓 案例示例

### 理想买入信号
```
💚 多周期共振买入点 (强度: 89分)
建议价格: 85.50元
止损位: 82.71元 (-3.26%)
止盈位: 88.60元(+3.63%)
风险收益比: 1:2.08
置信度: 80%
理由: 多周期共振向上 + 均线多头排列

✅ 操作：可以考虑买入，严格止损82.71元
```

### 警惕卖出信号（建议减仓）
```
🔴 破位卖出点 (强度: 85分)
建议卖出价: 85.00元（当前持仓建议立即卖出）
止损位: 80.75元 (↓5%) - 如不卖，跌到这里必须卖出止损
止盈位: 87.55元 (↑3%) - 如判断错误反弹，涨到这里卖出
风险收益比: 5:1（继续持仓下跌风险大）
理由: 跌破关键支撑位 + 放量下跌确认破位

⚠️ 顶背离预警 (强度: 35%)
⛔ 操作：建议立即减仓或清仓离场

📝 说明：卖出信号建议立即卖出，如不卖可设置保护性止损止盈
       - 止损位 < 当前价：防止继续下跌损失扩大
       - 止盈位 > 当前价：如果判断错误反而上涨，高位止盈
```

---

**祝你投资顺利！📈**

更多详细信息请查看：
- 代码实现：`src-tauri/src/stock_prediction/prediction.rs`
- 测试示例：`src-tauri/examples/test_professional_prediction.rs` 