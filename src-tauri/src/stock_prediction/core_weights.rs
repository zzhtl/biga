/// 股票预测系统 - 核心权重配置
/// 
/// 本文件集中管理所有影响预测准确率的核心权重参数
/// 这些权重是系统最重要的调优参数，调整时需要特别谨慎
/// 
/// ⚠️ 重要提示：
/// - 这些权重直接影响预测准确率和方向判断
/// - 调整后必须进行充分的回测验证
/// - 建议每次只调整1-2个权重，观察效果
/// - 记录每次调整和对应的回测结果
/// 
/// 调整策略：
/// - 小幅调整：每次±5%（例如 0.20 → 0.21 或 0.19）
/// - 中幅调整：每次±10%（例如 0.20 → 0.22 或 0.18）
/// - 大幅调整：每次±20%（仅在确定方向错误时）

// ============================================================================
// 一、涨跌幅预测核心权重体系 ⭐⭐⭐⭐⭐
// ============================================================================
// 说明：这是影响涨跌幅预测的完整权重体系，包含基础权重、增强因子、调节系数
// 影响：直接决定未来价格预测和涨跌幅大小
// 优先级：⭐⭐⭐⭐⭐ (最高 - 调整这里会直接改变预测结果)
//
// 涨跌幅计算流程：
// 1. 基础预测计算（基础权重）
// 2. 多因子评分调整（多因子影响系数）
// 3. 趋势一致性增强（趋势偏置值）
// 4. 支撑压力位调整（压力支撑系数）
// 5. 波动率与情绪调节（市场调节系数）
// 6. 方向确认与抑制（反向抑制系数）

// ----------------------------------------------------------------------------
// 1.1 基础预测权重（第一层计算）
// ----------------------------------------------------------------------------
// 说明：这5个权重构成基础预测，通过加权平均计算初始涨跌幅
// 特点：相对影响，通过权重比例分配各因素重要性
// 调整建议：总和不要求=1.0，但建议保持在0.8-1.2之间

/// 基础预测 - 趋势因子占比 (25%)
/// 说明：趋势延续性的权重，包括均线排列、趋势强度
/// 调整影响：过高→追涨杀跌；过低→错失趋势
/// 建议范围：20%-35%
/// 当前策略：中等偏低，减少追涨杀跌
pub const PREDICTION_TREND_RATIO: f64 = 0.25;

/// 基础预测 - 技术指标占比 (35%)
/// 说明：MACD、KDJ、RSI等技术指标的权重
/// 调整影响：影响对技术信号的响应速度
/// 建议范围：25%-40%
/// 当前策略：较高，重视技术指标信号
pub const PREDICTION_TECHNICAL_RATIO: f64 = 0.35;

/// 基础预测 - 均线量能占比 (30%)
/// 说明：均线偏离度和成交量配合的权重
/// 调整影响：影响中期趋势判断
/// 建议范围：20%-35%
/// 当前策略：较高，重视量价配合
pub const PREDICTION_MA_VOLUME_RATIO: f64 = 0.30;

/// 基础预测 - 市场波动占比 (5%)
/// 说明：历史波动率的权重，用于平滑预测
/// 调整影响：影响预测的平滑程度
/// 建议范围：3%-10%
/// 当前策略：很低，减少随机波动影响
pub const PREDICTION_MARKET_FLUCTUATION_RATIO: f64 = 0.05;

/// 基础预测 - 基础模型占比 (5%)
/// 说明：神经网络原始输出的权重
/// 调整影响：过高→过拟合；过低→浪费模型
/// 建议范围：3%-10%
/// 当前策略：很低，模型权重较小
pub const PREDICTION_BASE_MODEL_RATIO: f64 = 0.05;

// ----------------------------------------------------------------------------
// 1.2 多因子评分影响系数（第二层调整）⭐ 新增
// ----------------------------------------------------------------------------
// 说明：根据多因子综合评分对基础预测进行调整
// 特点：绝对影响，直接增减涨跌幅
// 调整建议：这些系数决定了多因子评分对涨跌幅的影响强度

/// 多因子评分 - 强烈看涨影响系数 (评分>75分)
/// 说明：当综合评分>75分时，每多1分增加的涨跌幅
/// 影响：评分80分时 = +0.5% + (80-75)×0.15% = +1.25%
/// 建议范围：0.10%-0.20%
/// 当前策略：0.15%，强烈信号有明显影响
pub const MULTI_FACTOR_STRONG_BULLISH_IMPACT: f64 = 0.0015;

/// 多因子评分 - 看涨影响系数 (评分60-75分)
/// 说明：当综合评分60-75分时，每多1分增加的涨跌幅
/// 影响：评分70分时 = (70-60)×0.08% = +0.8%
/// 建议范围：0.05%-0.12%
/// 当前策略：0.08%，中等信号适度影响
pub const MULTI_FACTOR_BULLISH_IMPACT: f64 = 0.0008;

/// 多因子评分 - 看跌影响系数 (评分25-40分)
/// 说明：当综合评分25-40分时，每少1分减少的涨跌幅
/// 影响：评分30分时 = (40-30)×0.08% = -0.8%
/// 建议范围：0.05%-0.12%
/// 当前策略：0.08%，对称设计
pub const MULTI_FACTOR_BEARISH_IMPACT: f64 = 0.0008;

/// 多因子评分 - 强烈看跌影响系数 (评分<25分)
/// 说明：当综合评分<25分时，每少1分减少的涨跌幅
/// 影响：评分20分时 = -0.5% + (25-20)×0.15% = -1.25%
/// 建议范围：0.10%-0.20%
/// 当前策略：0.15%，强烈信号有明显影响
pub const MULTI_FACTOR_STRONG_BEARISH_IMPACT: f64 = 0.0015;

/// 多因子评分 - 中性区间基准偏置 (评分40-60分)
/// 说明：中性区间的基准偏置值
/// 影响：中性时略微倾向的方向
/// 建议范围：-0.2% ~ +0.2%
/// 当前策略：0，完全中性
pub const MULTI_FACTOR_NEUTRAL_BIAS: f64 = 0.0;

// ----------------------------------------------------------------------------
// 1.3 趋势一致性增强系数（第三层增强）
// ----------------------------------------------------------------------------
// 说明：当趋势和技术指标一致时，进一步增强预测信号
// 特点：绝对影响，直接加减固定百分比
// 调整建议：偏置值过大会导致追涨杀跌

/// 强一致性趋势偏置值 (0.4%)
/// 说明：强趋势+技术指标一致时，直接增加的涨跌幅
/// 场景：强烈上涨+MACD金叉 → +0.4%
/// 调整影响：偏置越大预测越激进
/// 建议范围：0.2%-0.8%
/// 当前策略：0.4%，适度增强
pub const STRONG_ALIGNMENT_BIAS: f64 = 0.004;

/// 强一致性反向预测抑制系数 (35%)
/// 说明：强趋势+技术指标一致时，反向预测被压制到35%
/// 场景：强烈上涨+MACD金叉，但出现下跌预测 → ×0.35
/// 调整影响：系数越小抑制越强，趋势越难改变
/// 建议范围：25%-45%
/// 当前策略：35%，中等抑制
pub const STRONG_ALIGNMENT_OPPOSITE_SUPPRESS: f64 = 0.35;

/// 中等一致性趋势偏置值 (0.2%)
/// 说明：强趋势但技术指标不一致时的偏置
/// 建议范围：0.1%-0.4%
pub const MEDIUM_ALIGNMENT_BIAS: f64 = 0.002;

/// 中等一致性反向预测抑制系数 (50%)
/// 建议范围：40%-60%
pub const MEDIUM_ALIGNMENT_OPPOSITE_SUPPRESS: f64 = 0.50;

/// 弱一致性趋势偏置值 (0.1%)
/// 说明：普通趋势+技术指标一致时的偏置
/// 建议范围：0.05%-0.3%
pub const WEAK_ALIGNMENT_BIAS: f64 = 0.001;

/// 弱一致性反向预测抑制系数 (60%)
/// 建议范围：50%-70%
pub const WEAK_ALIGNMENT_OPPOSITE_SUPPRESS: f64 = 0.60;

/// 最弱一致性反向预测抑制系数 (75%)
/// 说明：普通趋势但技术指标不一致时的抑制
/// 建议范围：65%-85%
pub const MINIMAL_ALIGNMENT_OPPOSITE_SUPPRESS: f64 = 0.75;

/// 最弱一致性趋势偏置值 (0.05%)
/// 建议范围：0.02%-0.2%
pub const MINIMAL_ALIGNMENT_BIAS: f64 = 0.0005;

/// 中性趋势金叉死叉偏置 (0.15%)
/// 说明：震荡市中出现金叉死叉的偏置
/// 建议范围：0.1%-0.3%
pub const NEUTRAL_CROSS_BIAS: f64 = 0.0015;

// ----------------------------------------------------------------------------
// 1.4 支撑压力位影响系数（第四层调整）⭐ 新增
// ----------------------------------------------------------------------------
// 说明：根据价格与支撑压力位的距离调整涨跌幅
// 特点：位置敏感，在关键位置产生阻力或支撑

/// 接近强压力位衰减系数 (距离<2%)
/// 说明：价格接近强压力位时，上涨预测被衰减
/// 影响：预测+3%上涨，接近压力位 → +3% × 0.50 = +1.5%
/// 建议范围：0.40-0.70
/// 当前策略：0.50，显著衰减
pub const NEAR_STRONG_RESISTANCE_DECAY: f64 = 0.50;

/// 接近压力位衰减系数 (距离2%-5%)
/// 说明：价格接近普通压力位时的衰减
/// 建议范围：0.60-0.80
pub const NEAR_RESISTANCE_DECAY: f64 = 0.70;

/// 接近强支撑位增强系数 (距离<2%)
/// 说明：价格接近强支撑位时，下跌预测被衰减，反弹预测增强
/// 影响：预测-3%下跌，接近支撑位 → -3% × 0.50 = -1.5%
/// 建议范围：0.40-0.70
pub const NEAR_STRONG_SUPPORT_PROTECTION: f64 = 0.50;

/// 接近支撑位增强系数 (距离2%-5%)
/// 建议范围：0.60-0.80
pub const NEAR_SUPPORT_PROTECTION: f64 = 0.70;

/// 突破压力位加速系数 (放量突破)
/// 说明：突破压力位且放量时，上涨预测加速
/// 影响：预测+2%上涨，放量突破 → +2% × 1.30 = +2.6%
/// 建议范围：1.20-1.50
pub const BREAKOUT_ACCELERATION: f64 = 1.30;

/// 跌破支撑位加速系数 (放量下跌)
/// 说明：跌破支撑位且放量时，下跌预测加速
/// 建议范围：1.20-1.50
pub const BREAKDOWN_ACCELERATION: f64 = 1.30;

// ----------------------------------------------------------------------------
// 1.5 波动率与市场情绪调节系数（第五层调节）⭐ 新增
// ----------------------------------------------------------------------------
// 说明：根据市场波动率和情绪极端程度调整预测
// 特点：风险控制，在极端情况下调整预测强度

/// 高波动率抑制系数 (ATR/价格 > 5%)
/// 说明：高波动时降低所有预测的置信度
/// 影响：预测±3%，高波动 → ±3% × 0.80 = ±2.4%
/// 建议范围：0.70-0.90
/// 当前策略：0.80，适度抑制
pub const HIGH_VOLATILITY_SUPPRESS: f64 = 0.80;

/// 极高波动率抑制系数 (ATR/价格 > 8%)
/// 说明：极高波动时大幅降低预测强度
/// 建议范围：0.50-0.70
pub const EXTREME_VOLATILITY_SUPPRESS: f64 = 0.60;

/// 低波动率增强系数 (ATR/价格 < 1.5%)
/// 说明：低波动时可以更坚定预测
/// 影响：预测±2%，低波动 → ±2% × 1.15 = ±2.3%
/// 建议范围：1.10-1.25
pub const LOW_VOLATILITY_ENHANCE: f64 = 1.15;

/// 极度恐慌增强系数 (恐惧贪婪指数<20)
/// 说明：极度恐慌时的反向买入信号增强
/// 影响：如果预测上涨，恐慌时 → 预测 × 1.25
/// 建议范围：1.15-1.35
pub const EXTREME_FEAR_CONTRARIAN_BOOST: f64 = 1.25;

/// 极度贪婪抑制系数 (恐惧贪婪指数>80)
/// 说明：极度贪婪时的上涨预测抑制
/// 影响：如果预测上涨，贪婪时 → 预测 × 0.75
/// 建议范围：0.65-0.85
pub const EXTREME_GREED_SUPPRESS: f64 = 0.75;

/// 恐慌期反转加成 (市场阶段="恐慌期")
/// 说明：恐慌期的反转机会加成
/// 影响：预测上涨时 → 额外 +0.5%
/// 建议范围：0.3%-0.8%
pub const PANIC_REVERSAL_BONUS: f64 = 0.005;

/// 过热期回调加成 (市场阶段="过热期")
/// 说明：过热期的回调机会加成
/// 影响：预测下跌时 → 额外 -0.5%
/// 建议范围：0.3%-0.8%
pub const OVERHEATED_CORRECTION_BONUS: f64 = 0.005;

// ----------------------------------------------------------------------------
// 1.6 方向投票权重（方向确认）
// ----------------------------------------------------------------------------
// 说明：多个技术指标对预测方向进行投票确认
// 特点：投票机制，通过得分高低确认方向可靠性

/// 强趋势投票分 (强烈上涨/下跌)
pub const STRONG_TREND_VOTE_SCORE: f64 = 2.0;

/// 普通趋势投票分
pub const NORMAL_TREND_VOTE_SCORE: f64 = 1.0;

/// MACD金叉死叉投票分
pub const MACD_CROSS_VOTE_SCORE: f64 = 1.2;

/// MACD柱状图投票分
pub const MACD_HISTOGRAM_VOTE_SCORE: f64 = 0.6;

/// MACD零轴穿越投票分
pub const MACD_ZERO_CROSS_VOTE_SCORE: f64 = 0.8;

/// KDJ金叉死叉投票分
pub const KDJ_CROSS_VOTE_SCORE: f64 = 0.8;

/// KDJ超买超卖投票分
pub const KDJ_EXTREME_VOTE_SCORE: f64 = 0.6;

/// RSI强烈超买超卖投票分
pub const RSI_EXTREME_VOTE_SCORE: f64 = 0.8;

/// RSI一般偏离投票分
pub const RSI_MODERATE_VOTE_SCORE: f64 = 0.3;

/// 方向投票 - 强确认阈值 (得分>5)
/// 说明：投票得分超过此值时，方向高度确认
/// 影响：高确认时增加预测强度
/// 建议范围：4.0-6.0
pub const DIRECTION_STRONG_CONFIRM_THRESHOLD: f64 = 5.0;

/// 方向投票 - 弱确认阈值 (得分>3)
/// 建议范围：2.5-4.0
pub const DIRECTION_WEAK_CONFIRM_THRESHOLD: f64 = 3.0;

/// 方向高确认增强系数
/// 说明：方向高度确认时的预测增强
/// 影响：预测±2%，高确认 → ±2% × 1.20 = ±2.4%
/// 建议范围：1.15-1.30
pub const DIRECTION_STRONG_CONFIRM_BOOST: f64 = 1.20;

/// 方向弱确认抑制系数
/// 说明：方向确认度低时的预测抑制
/// 建议范围：0.70-0.90
pub const DIRECTION_WEAK_CONFIRM_SUPPRESS: f64 = 0.85;

// ============================================================================
// 二、多因子综合评分权重 (Multi-Factor Scoring Weights) ⭐⭐⭐⭐
// ============================================================================
// 说明：这8个权重决定了综合评分的构成，总和必须为100%
// 影响：影响买卖点识别和操作建议的生成（不直接影响涨跌幅预测）
// 优先级：⭐⭐⭐⭐ (高)
//
// 注意：这些权重影响"操作建议"，不影响"价格预测"

/// 趋势因子权重 (22%)
/// 说明：股价主要运动方向的权重，通常是最重要的因子
/// 适用场景：趋势明显的市场
/// 调高时机：牛市/熊市，趋势预测准确率高时
/// 调低时机：震荡市，趋势判断频繁失误时
pub const TREND_FACTOR_WEIGHT: f64 = 0.22;

/// 量价因子权重 (18%)
/// 说明：成交量与价格配合关系的权重
/// 适用场景：成交量数据可靠时
/// 调高时机：量价配合规律明显时
/// 调低时机：成交量数据噪音大或不准确时
pub const VOLUME_PRICE_FACTOR_WEIGHT: f64 = 0.18;

/// 多周期共振因子权重 (15%)
/// 说明：日线、周线、月线多时间周期共振的权重
/// 适用场景：多周期信号一致性高时
/// 调高时机：共振信号准确率高时
/// 调低时机：不同周期信号冲突频繁时
pub const MULTI_TIMEFRAME_FACTOR_WEIGHT: f64 = 0.15;

/// 动量因子权重 (13%)
/// 说明：RSI、MACD等技术指标的权重
/// 适用场景：技术指标有效性高时
/// 调高时机：技术指标信号准确率高时
/// 调低时机：指标频繁失效或钝化时
pub const MOMENTUM_FACTOR_WEIGHT: f64 = 0.13;

/// K线形态因子权重 (12%)
/// 说明：K线形态识别的权重
/// 适用场景：短期交易，形态有效性高时
/// 调高时机：K线形态准确率高时
/// 调低时机：关注中长期趋势，形态失效频繁时
pub const PATTERN_FACTOR_WEIGHT: f64 = 0.12;

/// 支撑压力因子权重 (10%)
/// 说明：关键价位支撑和阻力的权重
/// 适用场景：价格在关键位附近时
/// 调高时机：支撑压力位有效性高时
/// 调低时机：频繁突破关键位时
pub const SUPPORT_RESISTANCE_FACTOR_WEIGHT: f64 = 0.10;

/// 市场情绪因子权重 (7%)
/// 说明：市场整体情绪的权重
/// 适用场景：市场情绪极端时（恐慌/狂热）
/// 调高时机：情绪指标对行情影响明显时
/// 调低时机：情绪指标噪音大时
pub const SENTIMENT_FACTOR_WEIGHT: f64 = 0.07;

/// 波动率因子权重 (3%)
/// 说明：市场波动率的权重
/// 适用场景：风险控制为主时
/// 调高时机：需要重点控制风险时
/// 调低时机：波动率变化不大时
pub const VOLATILITY_FACTOR_WEIGHT: f64 = 0.03;

// ============================================================================
// 三、技术指标影响权重 (Technical Indicator Impact Weights)
// ============================================================================
// 说明：不同市场状态下技术指标的影响权重
// 影响：影响技术指标在预测中的作用程度
// 优先级：⭐⭐⭐⭐ (高)

/// 强趋势技术指标一致权重 (3.5%)
/// 说明：强趋势且技术指标一致时的影响权重
pub const TECH_STRONG_ALIGNED_WEIGHT: f64 = 0.035;

/// 强趋势技术指标冲突权重 (0.5%)
/// 说明：强趋势但技术指标冲突时的影响权重
pub const TECH_STRONG_CONFLICT_WEIGHT: f64 = 0.005;

/// 强趋势技术指标中性权重 (1.5%)
/// 说明：强趋势下技术指标中性信号的影响权重
pub const TECH_STRONG_NEUTRAL_WEIGHT: f64 = 0.015;

/// 中性趋势技术指标交叉权重 (2.5%)
/// 说明：中性趋势下技术指标金叉/死叉的影响权重
pub const TECH_NEUTRAL_CROSS_WEIGHT: f64 = 0.025;

/// 中性趋势技术指标一般权重 (1.2%)
/// 说明：中性趋势下技术指标一般信号的影响权重
pub const TECH_NEUTRAL_WEIGHT: f64 = 0.012;

// ============================================================================
// 七、趋势衰减系数 (Trend Decay Factors)
// ============================================================================
// 说明：随着预测天数增加，各因素影响力的日衰减系数
// 影响：影响远期预测的可靠性
// 优先级：⭐⭐⭐⭐ (高)

/// 技术指标衰减基数 (0.92)
/// 说明：技术指标影响力每日衰减到92%
/// 第1天100%，第2天92%，第3天85%，第5天72%
pub const TECH_DECAY_BASE: f64 = 0.92;

/// 均线量能衰减基数 (0.96)
/// 说明：均线和量能偏置每日衰减到96%
pub const MA_VOLUME_DECAY_BASE: f64 = 0.96;

/// 强趋势一致衰减基数 (0.99)
/// 说明：强趋势且技术指标一致时的衰减最慢
pub const STRONG_ALIGNED_DECAY_BASE: f64 = 0.99;

/// 强趋势冲突衰减基数 (0.97)
/// 说明：强趋势但技术指标冲突时的衰减
pub const STRONG_CONFLICT_DECAY_BASE: f64 = 0.97;

/// 普通趋势衰减基数 (0.95)
/// 说明：普通趋势的衰减
pub const NORMAL_TREND_DECAY_BASE: f64 = 0.95;

/// 中性趋势衰减基数 (0.90)
/// 说明：中性趋势的衰减最快
pub const NEUTRAL_TREND_DECAY_BASE: f64 = 0.90;

/// 简单预测趋势衰减基数 (0.90)
/// 说明：简单预测策略中的趋势衰减
pub const SIMPLE_TREND_DECAY_BASE: f64 = 0.90;

// ============================================================================
// 八、均值回归参数 (Mean Reversion Parameters)
// ============================================================================
// 说明：价格偏离均线时的回归力量
// 影响：影响价格向均线回归的速度
// 优先级：⭐⭐⭐ (中)

/// MA20回归权重 (60%)
/// 说明：MA20在均值回归计算中的权重
pub const MA20_REVERSION_WEIGHT: f64 = 0.6;

/// MA60回归权重 (40%)
/// 说明：MA60在均值回归计算中的权重
pub const MA60_REVERSION_WEIGHT: f64 = 0.4;

/// 强均值回归力量 (30%)
/// 说明：价格偏离>5%时的回归力量
pub const STRONG_MEAN_REVERSION_FORCE: f64 = 0.3;

/// 温和均值回归力量 (20%)
/// 说明：价格偏离>3%时的回归力量
pub const MODERATE_MEAN_REVERSION_FORCE: f64 = 0.2;

/// 趋势成分权重 (70%)
/// 说明：趋势强度在综合变化率中的权重
pub const TREND_COMPONENT_WEIGHT: f64 = 0.7;

// ============================================================================
// 九、量价预测权重 (Volume-Price Prediction Weights)
// ============================================================================
// 说明：量价关系策略中使用的权重
// 影响：影响基于量价关系的预测准确率
// 优先级：⭐⭐⭐ (中)

/// 方向准确率权重 (70%)
/// 说明：评估预测准确率时，方向判断的权重
pub const DIRECTION_ACCURACY_WEIGHT: f64 = 0.7;

/// 价格准确率权重 (30%)
/// 说明：评估预测准确率时，价格精确度的权重
pub const PRICE_ACCURACY_WEIGHT: f64 = 0.3;

/// 强信号基础置信度 (0.7)
/// 说明：强烈看涨/看跌信号的基础置信度
pub const STRONG_SIGNAL_BASE_CONFIDENCE: f64 = 0.7;

/// 弱信号基础置信度 (0.55)
/// 说明：轻微看涨/看跌信号的基础置信度
pub const WEAK_SIGNAL_BASE_CONFIDENCE: f64 = 0.55;

/// 信号差异置信度加成 (0.05/分)
/// 说明：多空信号差距每增加1分，置信度增加的幅度
pub const SIGNAL_DIFF_CONFIDENCE_BOOST: f64 = 0.05;

/// 信号差异置信度加成（弱信号）(0.03/分)
pub const WEAK_SIGNAL_DIFF_CONFIDENCE_BOOST: f64 = 0.03;

// ============================================================================
// 使用说明与调优建议
// ============================================================================
//
// ## 调优流程：
//
// 1. **基准回测**
//    - 使用当前权重进行回测，记录：
//      - 整体预测准确率
//      - 方向预测准确率
//      - 上涨/下跌/震荡三种场景的表现
//      - 各因子得分分布
//
// 2. **问题诊断**
//    - 方向错误频繁 → 调整"方向投票权重"和"趋势一致性系数"
//    - 涨跌幅偏差大 → 调整"预测算法核心权重"
//    - 趋势判断失误 → 调整"趋势因子权重"
//    - 追涨杀跌严重 → 降低"强一致性偏置值"，提高"反向抑制系数"
//    - 信号迟钝 → 提高"技术指标权重"
//
// 3. **权重调整**
//    - 每次只调整1-2个相关权重
//    - 小幅调整：±5%（如 0.40 → 0.42 或 0.38）
//    - 中幅调整：±10%（如 0.40 → 0.44 或 0.36）
//    - 大幅调整：±20%（如 0.40 → 0.48 或 0.32）
//
// 4. **验证测试**
//    - 重新回测，对比调整前后的结果
//    - 重点关注：
//      - 准确率是否提升
//      - 是否产生新的问题
//      - 不同市场环境的表现
//
// 5. **记录归档**
//    - 记录每次调整的权重值
//    - 记录调整原因和预期效果
//    - 记录实际效果和回测数据
//    - 如果效果不佳，回滚到上一版本
//
// ## 常见调优场景：
//
// ### 场景1：预测总是追涨杀跌（滞后）
// - 降低 STRONG_ALIGNMENT_BIAS (1.0% → 0.6%)
// - 提高 PREDICTION_TECHNICAL_RATIO (30% → 35%)
// - 降低 PREDICTION_TREND_RATIO (40% → 35%)
//
// ### 场景2：预测方向频繁错误
// - 提高 STRONG_ALIGNMENT_OPPOSITE_SUPPRESS (25% → 20%)
// - 调整方向投票权重，增强可靠指标权重
// - 提高 TREND_FACTOR_WEIGHT (22% → 25%)
//
// ### 场景3：震荡市表现差
// - 提高 SUPPORT_RESISTANCE_FACTOR_WEIGHT (10% → 12%)
// - 提高 PATTERN_FACTOR_WEIGHT (12% → 14%)
// - 降低 TREND_FACTOR_WEIGHT (22% → 20%)
//
// ### 场景4：趋势市错失机会
// - 提高 PREDICTION_TREND_RATIO (40% → 45%)
// - 提高 MULTI_TIMEFRAME_FACTOR_WEIGHT (15% → 18%)
// - 降低 MEDIUM_ALIGNMENT_OPPOSITE_SUPPRESS (40% → 35%)
//
// ## 权重归一化检查：
//
// 多因子评分权重之和应该为 1.0:
// TREND + VOLUME_PRICE + MULTI_TIMEFRAME + MOMENTUM + PATTERN + 
// SUPPORT_RESISTANCE + SENTIMENT + VOLATILITY = 1.0
//
// 当前配置：0.22 + 0.18 + 0.15 + 0.13 + 0.12 + 0.10 + 0.07 + 0.03 = 1.00 ✓ 