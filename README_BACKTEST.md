# 股票预测回测功能说明

## 功能概述

回测功能允许用户使用历史数据评估股票预测模型的准确性，帮助了解模型在实际市场条件下的表现。

## 主要特性

### 1. 📊 多维度准确率分析
- **价格准确率**: 预测价格与实际价格的相符程度
- **方向准确率**: 预测涨跌方向的正确率
- **误差分布**: 预测误差的统计分布

### 2. 📈 时间序列回测
- 按指定间隔在历史时间点进行预测
- 支持多种回测间隔（1天、7天、30天等）
- 完整的时间序列准确率趋势分析

### 3. 🎯 模型性能评估
- 总体预测准确率统计
- 波动率与准确率的关系分析
- 不同市场条件下的模型表现

### 4. 📋 详细回测报告
- 每次预测的详细结果对比
- 准确率趋势图表
- 模型性能评估指标

## 使用方法

### 1. 前端界面操作
1. 在股票预测页面选择"回测报告"选项卡
2. 选择要回测的模型
3. 设置回测参数：
   - 回测开始日期
   - 回测结束日期
   - 预测天数
   - 回测间隔
4. 点击"开始回测"按钮
5. 查看详细的回测结果报告

### 2. 回测参数说明

- **股票代码**: 要回测的股票代码（如：sh000001）
- **模型名称**: 选择已训练的模型
- **回测期间**: 指定回测的历史时间范围
- **预测天数**: 每次预测的天数（1-10天）
- **回测间隔**: 相邻两次预测之间的间隔天数

### 3. 回测结果解读

#### 总体统计
- **总预测次数**: 回测期间执行的预测总数
- **整体价格准确率**: 所有预测的平均价格准确率
- **整体方向准确率**: 所有预测的平均方向准确率
- **平均预测误差**: 价格预测的平均误差百分比

#### 详细回测记录
- **预测日期**: 每次预测的发起日期
- **价格准确率**: 该次预测的价格准确率
- **方向准确率**: 该次预测的方向准确率
- **预测误差**: 该次预测的平均误差

## 技术实现

### 后端实现
- **回测引擎**: `src-tauri/src/stock_prediction/backtest.rs`
- **数据处理**: 基于历史数据的时间序列分析
- **准确率计算**: 多维度准确率评估算法

### 前端实现
- **用户界面**: 直观的回测参数设置界面
- **结果展示**: 图表和表格形式的回测结果
- **数据可视化**: 准确率趋势图和统计图表

## 注意事项

1. **数据质量**: 回测结果依赖于历史数据的质量和完整性
2. **模型版本**: 确保使用的模型是基于回测期间之前的数据训练的
3. **市场条件**: 历史回测结果不能完全预测未来表现
4. **计算时间**: 长期回测可能需要较长的计算时间

## 应用场景

### 1. 模型评估
- 评估不同模型在相同数据上的表现
- 选择最优的预测模型

### 2. 参数优化
- 测试不同预测天数的效果
- 优化模型训练参数

### 3. 策略验证
- 验证基于预测的交易策略
- 评估风险控制措施

### 4. 性能监控
- 监控模型性能的变化趋势
- 及时发现模型退化

## 扩展功能

### 1. 多股票回测
- 支持批量回测多只股票
- 行业和板块回测分析

### 2. 策略回测
- 基于预测结果的交易策略回测
- 收益率和风险指标计算

### 3. 对比分析
- 不同模型的性能对比
- 不同时间段的表现对比

## 常见问题

### Q: 回测结果的准确率很低怎么办？
A: 可能原因包括：
- 训练数据不足
- 模型过拟合
- 市场环境变化
- 建议重新训练模型或调整参数

### Q: 回测需要多长时间？
A: 取决于：
- 回测时间范围
- 回测间隔
- 历史数据量
- 通常几分钟到几十分钟

### Q: 能否回测未来数据？
A: 不能，回测只能使用历史数据来评估模型的历史表现。

## 更新日志

### v1.0.0 (2024-01-01)
- 初始版本发布
- 基础回测功能实现
- 准确率分析和报告生成
- 前端界面集成 